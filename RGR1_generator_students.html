<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>РГР №1 – Генератор вариантов (для студентов)</title>
<style>
  body { font-family: Arial, sans-serif; margin: 24px; line-height: 1.35; background: #ffffff; }
  header { margin-bottom: 18px; }
  h1 { margin: 0 0 6px 0; font-size: 22px; }
  .hint { color: #555; font-size: 13px; margin: 0; }
  section { margin: 22px 0 34px 0; padding-top: 8px; border-top: 1px solid #ddd; }
  .grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; align-items: end; }
  @media (max-width: 980px) { .grid { grid-template-columns: 1fr; } }
  label { display: block; font-size: 13px; color: #333; margin-bottom: 4px; }
  select, input[type="number"] { width: 100%; padding: 8px 10px; border: 1px solid #ccc; border-radius: 10px; font-size: 14px; background: #fff; }
  .static { width: 100%; padding: 8px 10px; border: 1px solid #ccc; border-radius: 10px; font-size: 14px; background: #fff; box-sizing: border-box; }
  .row { display: flex; gap: 12px; flex-wrap: wrap; align-items: center; margin-top: 10px; }
  button { padding: 9px 12px; border: 1px solid #bbb; background: #f7f7f7; border-radius: 10px; cursor: pointer; }
  button:hover { background: #efefef; }
  .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; font-size: 12.8px; }
  pre { padding: 12px; overflow-x: auto; border-radius: 10px; margin: 10px 0; }
  pre.out { background: #eaf4ff; }
  pre.code { background: #f7f7f7; }
  details { margin-top: 10px; background: #eaf4ff; border: 1px solid #d6e8ff; border-radius: 10px; padding: 10px 12px; }
  details > *:not(summary) { margin-top: 8px; }
  summary { cursor: pointer; user-select: none; font-weight: 600; }
  table { border-collapse: collapse; width: 100%; }
  th, td { border: 1px solid #eee; padding: 6px 8px; font-size: 13px; }
  th { background: #fafafa; text-align: left; }
</style>
</head>
<body>

<header>
  <h1>РГР №1 – Генератор вариантов (для студентов)</h1>
  <p class="hint">Дисциплина: «Математическая статистика», 2025-2026 уч. год. Группы A-F, варианты 1-15.</p>
</header>

<section>
  <h2>Выбор варианта</h2>
  <div class="grid">
    <div>
      <label for="pkg">Группа</label>
      <select id="pkg">
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
        <option value="E">E</option>
        <option value="F">F</option>
      </select>
    </div>
    <div>
      <label for="varno">Номер варианта</label>
      <select id="varno"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option></select>
    </div>
    <div>
      <label>Объём выборки</label>
      <div class="static">n = 200</div>
    </div>
  </div>

  <details>
    <summary>Направления подготовки и группы (A-F)</summary>
    <table>
      <thead><tr><th>Группа</th><th>Направления подготовки</th></tr></thead>
      <tbody>
        <tr><td><b>A</b></td><td>Технологии защиты информации; Системное и прикладное программное обеспечение; Компьютерные системы и технологии; Мобильные и сетевые технологии; DevOps в разработке и управлении информационными системами</td></tr>
        <tr><td><b>B</b></td><td>Робототехника и искусственный интеллект; Языковые модели и искусственный интеллект; MLOps: управление системами ИИ</td></tr>
        <tr><td><b>C</b></td><td>Технологии разработки компьютерных игр; Геймдизайн и продюсирование компьютерных игр; Компьютерные технологии в дизайне</td></tr>
        <tr><td><b>D</b></td><td>Бизнес-информатика и управление на основе данных; Инновационные технологии в умном городе; Технологии и инновации</td></tr>
        <tr><td><b>E</b></td><td>Физика наноструктур; Фотоника и оптоинформатика; Физика фотонных технологий</td></tr>
        <tr><td><b>F</b></td><td>Биоинженерия</td></tr>
      </tbody>
    </table>
    <p class="hint">Если вы не уверены, какая группа относится к вашему направлению, сверяйтесь с таблицей.</p>
  </details>

  <div class="row">
<button id="btnGen">Сгенерировать</button>
    <button id="btnCSV" disabled>Скачать CSV</button>
<span class="hint" id="status"></span>
  </div>

  <details open>
    <summary>Информация о текущем варианте</summary>
    <pre class="out mono" id="meta">Сначала нажмите «Сгенерировать».</pre>
  </details>

  <details>
    <summary>Краткий прикладной контекст группы</summary>
    <div class="hint" id="pkgContext"></div>
  </details>

  
</section>

<section>
  <h2>Предпросмотр данных</h2>
  <p class="hint">Показываются первые 12 строк (для удобства).</p>
  <div id="preview"></div>
</section>



<script>
/* ===== RNG utils ===== */
function mulberry32(a) {
  return function() {
    let t = (a += 0x6D2B79F5);
    t = Math.imul(t ^ (t >>> 15), 1 | t);
    t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;
    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
  };
}
function randn(rng) {
  let u = 0, v = 0;
  while (u === 0) u = rng();
  while (v === 0) v = rng();
  return Math.sqrt(-2.0*Math.log(u)) * Math.cos(2.0*Math.PI*v);
}
function rexp(rng, lambda) {
  let u = 0;
  while (u === 0) u = rng();
  return -Math.log(u) / lambda;
}
function pick(range, rng) {
  // range = [lo, hi]
  const lo = range[0], hi = range[1];
  return lo + (hi-lo)*rng();
}
function shuffleInPlace(arr, rng) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(rng() * (i + 1));
    const tmp = arr[i]; arr[i] = arr[j]; arr[j] = tmp;
  }
  return arr;
}
function fmt(x) {
  return Number.isFinite(x) ? x.toFixed(2) : "";
}
function downloadText(filename, text) {
  const blob = new Blob([text], {type: "text/csv;charset=utf-8"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url; a.download = filename;
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
}

/* ===== Packages ===== */
const PACKAGES = {
  A: {
    name:"Инфраструктура, DevOps, сети и безопасность",
    units:"мс",
    context:[
      "В работе моделируется типичная ситуация: дана выборка из 200 наблюдений, и требуется сделать обоснованные выводы по данным.",
      "Примеры для группы A: время отклика сервиса на запрос, задержка передачи данных, время выполнения стандартной операции в системе.",
      "X1-X4 – разные показатели из одного прикладного контекста. Соответствие «столбец – закон» заранее не сообщается и определяется по данным.",
      "Единицы измерения: мс. Значения в CSV округлены до 2 знаков после запятой."
    ],
    normal: {mu:[35, 85], sigma:[5, 14]},
    unif:   {a:[10, 40], width:[30, 80]},
    sexp:   {c:[5, 25], meanY:[15, 90]},
    mix:    {mu1:[25, 55], mu2:[75, 120], sigma:[4, 10]}
  },
  B: {
    name:"AI, ML и робототехника",
    units:"усл. ед.",
    context:[
      "В работе моделируется типичная ситуация: дана выборка из 200 наблюдений, и требуется сделать обоснованные выводы по данным.",
      "Примеры для группы B: ошибка измерения датчика или ошибка предсказания модели, параметр настройки в заданных пределах, время выполнения одного шага алгоритма или обработки одного запроса.",
      "X1-X4 – разные показатели. Соответствие «столбец – закон» заранее не сообщается и определяется по данным.",
      "Единицы измерения: усл. ед. Значения в CSV округлены до 2 знаков после запятой."
    ],
    normal: {mu:[0, 2], sigma:[0.5, 2.0]},
    unif:   {a:[-3, 2], width:[2, 10]},
    sexp:   {c:[0, 2], meanY:[0.8, 6]},
    mix:    {mu1:[-1.5, 0.0], mu2:[1.5, 4.0], sigma:[0.4, 1.2]}
  },
  C: {
    name:"Игры и дизайн",
    units:"мс",
    context:[
      "В работе моделируется типичная ситуация: дана выборка из 200 наблюдений, и требуется сделать обоснованные выводы по данным.",
      "Примеры для группы C: время формирования кадра, задержка отклика управления, значение параметра объекта сцены в заданных пределах, время ожидания события.",
      "X1-X4 – разные показатели. Соответствие «столбец – закон» заранее не сообщается и определяется по данным.",
      "Единицы измерения: мс. Значения в CSV округлены до 2 знаков после запятой."
    ],
    normal: {mu:[8, 20], sigma:[1.0, 4.0]},
    unif:   {a:[0, 20], width:[20, 80]},
    sexp:   {c:[0, 10], meanY:[10, 120]},
    mix:    {mu1:[6, 14], mu2:[18, 30], sigma:[0.8, 2.5]}
  },
  D: {
    name:"Бизнес, данные и умный город",
    units:"усл. ед.",
    context:[
      "В работе моделируется типичная ситуация: дана выборка из 200 наблюдений, и требуется сделать обоснованные выводы по данным.",
      "Примеры для группы D: время ожидания услуги, количество обращений за интервал времени, показатель нагрузки, параметр качества сервиса в допустимом диапазоне.",
      "X1-X4 – разные показатели из одного прикладного контекста. Соответствие «столбец – закон» заранее не сообщается и определяется по данным.",
      "Единицы измерения: усл. ед. Значения в CSV округлены до 2 знаков после запятой."
    ],
    normal: {mu:[50, 120], sigma:[5, 25]},
    unif:   {a:[0, 30], width:[40, 140]},
    sexp:   {c:[0, 25], meanY:[5, 80]},
    mix:    {mu1:[40, 70], mu2:[110, 170], sigma:[5, 18]}
  },
  E: {
    name:"Физика, фотоника и нано",
    units:"усл. ед.",
    context:[
      "В работе моделируется типичная ситуация: дана выборка из 200 наблюдений, и требуется сделать обоснованные выводы по данным.",
      "Примеры для группы E: погрешность измерения, параметр сканирования в заданном диапазоне, время между регистрациями событий.",
      "X1-X4 – разные измеряемые величины. Соответствие «столбец – закон» заранее не сообщается и определяется по данным.",
      "Единицы измерения: усл. ед. Значения в CSV округлены до 2 знаков после запятой."
    ],
    normal: {mu:[0, 1], sigma:[0.05, 0.35]},
    unif:   {a:[-2, 1], width:[1, 6]},
    sexp:   {c:[0, 0.5], meanY:[0.3, 3.0]},
    mix:    {mu1:[-0.5, 0.2], mu2:[0.8, 1.8], sigma:[0.04, 0.25]}
  },
  F: {
    name:"Биоинженерия",
    units:"усл. ед.",
    context:[
      "В работе моделируется типичная ситуация: дана выборка из 200 наблюдений, и требуется сделать обоснованные выводы по данным.",
      "Примеры для группы F: результат измерения концентрации или оптической плотности, параметр процесса в допустимом диапазоне, время до реакции или срабатывания.",
      "X1-X4 – разные показатели. Соответствие «столбец – закон» заранее не сообщается и определяется по данным.",
      "Единицы измерения: усл. ед. Значения в CSV округлены до 2 знаков после запятой."
    ],
    normal: {mu:[0.2, 1.2], sigma:[0.05, 0.35]},
    unif:   {a:[0.0, 0.6], width:[0.2, 1.6]},
    sexp:   {c:[0.0, 0.4], meanY:[0.2, 2.0]},
    mix:    {mu1:[0.2, 0.7], mu2:[1.0, 1.8], sigma:[0.03, 0.18]}
  }
};

function paramsFor(pkgKey, varNo) {
  const P = PACKAGES[pkgKey];
  const seed = (pkgKey.charCodeAt(0) * 1000003 + varNo * 10007) >>> 0;
  const rng = mulberry32(seed);

  const mu = pick(P.normal.mu, rng);
  const sigma = pick(P.normal.sigma, rng);

  const a = pick(P.unif.a, rng);
  const width = pick(P.unif.width, rng);
  const b = a + width;

  const c = pick(P.sexp.c, rng);
  const meanY = pick(P.sexp.meanY, rng);
  const lambda = 1.0 / meanY;

  // Перестановка законов по столбцам X1..X3
  const distList = ["N","U","SE"];
  shuffleInPlace(distList, rng);

  // Параметры смеси для бонуса
  const mu1 = pick(P.mix.mu1, rng);
  const mu2 = pick(P.mix.mu2, rng);
  const sigmaMix = pick(P.mix.sigma, rng);

  return {
    seed: seed,
    pkgKey: pkgKey,
    pkg: P.name,
    units: P.units,
    base: {
      N: {mu: mu, sigma: sigma},
      U: {a: a, b: b},
      SE: {c: c, lambda: lambda}
    },
    mix: {mu1: mu1, mu2: mu2, sigma: sigmaMix, p: 0.5},
    layout: distList
  };
}

function generateData(pkgKey, varNo, n, includeX4) {
  const par = paramsFor(pkgKey, varNo);
  const rng = mulberry32((par.seed ^ 0x9e3779b9) >>> 0);

  function genFrom(dist) {
    if (dist === "N") {
      const mu = par.base.N.mu, sigma = par.base.N.sigma;
      return mu + sigma*randn(rng);
    }
    if (dist === "U") {
      const a = par.base.U.a, b = par.base.U.b;
      return a + (b-a)*rng();
    }
    if (dist === "SE") {
      const c = par.base.SE.c, lambda = par.base.SE.lambda;
      return c + rexp(rng, lambda);
    }
    return NaN;
  }

  const X1 = new Array(n);
  const X2 = new Array(n);
  const X3 = new Array(n);
  const layout = par.layout;

  for (let i=0;i<n;i++) {
    X1[i] = genFrom(layout[0]);
    X2[i] = genFrom(layout[1]);
    X3[i] = genFrom(layout[2]);
  }

  let X4 = null;
  if (includeX4) {
    const m = par.mix;
    X4 = new Array(n);
    for (let i=0;i<n;i++) {
      const comp = (rng() < m.p) ? 1 : 2;
      const mu = (comp===1) ? m.mu1 : m.mu2;
      X4[i] = mu + m.sigma*randn(rng);
    }
  }

  return {par: par, X1: X1, X2: X2, X3: X3, X4: X4};
}

function toCSV(dataObj, includeX4) {
  const X1 = dataObj.X1, X2 = dataObj.X2, X3 = dataObj.X3, X4 = dataObj.X4;
  const n = X1.length;
  const header = "X1,X2,X3,X4";
  const lines = [header];
  for (let i=0;i<n;i++) {
    const row = [X1[i],X2[i],X3[i],X4[i]];
    lines.push(row.map(fmt).join(","));
  }
  return lines.join("\n");
}

function renderPreview(dataObj, includeX4) {
  const nShow = Math.min(12, dataObj.X1.length);
  const cols = ["X1","X2","X3","X4"];

  let html = "<table><thead><tr>";
  for (const c of cols) html += "<th>"+c+"</th>";
  html += "</tr></thead><tbody>";

  for (let i=0;i<nShow;i++) {
    html += "<tr>";
    html += "<td class='mono'>"+fmt(dataObj.X1[i])+"</td>";
    html += "<td class='mono'>"+fmt(dataObj.X2[i])+"</td>";
    html += "<td class='mono'>"+fmt(dataObj.X3[i])+"</td>";
    if (includeX4) html += "<td class='mono'>"+fmt(dataObj.X4[i])+"</td>";
    html += "</tr>";
  }
  html += "</tbody></table>";
  document.getElementById("preview").innerHTML = html;
}

function updateContext(pkgKey) {
  const P = PACKAGES[pkgKey];
  const lines = P.context.map(x => "<p class='hint'>"+x+"</p>").join("");
  document.getElementById("pkgContext").innerHTML = lines;
}

let last = null;
let lastCSV = null;

function metaText(par, n, includeX4) {
  const variant = par.pkgKey + "-" + document.getElementById("varno").value;
  const cols = "X1, X2, X3, X4";
  return [
    "Вариант: " + variant,
    "Группа: " + par.pkgKey,
    "Единицы измерения: " + par.units,
    "Объём: n = " + n,
    "Колонки: " + cols
  ].join("\n");
}

document.getElementById("pkg").addEventListener("change", (e) => updateContext(e.target.value));
updateContext(document.getElementById("pkg").value);

document.getElementById("btnGen").addEventListener("click", async () => {
  const pkgKey = document.getElementById("pkg").value;
  const varNo = parseInt(document.getElementById("varno").value, 10);
  const n = 200;
  const includeX4 = true;

  last = generateData(pkgKey, varNo, n, includeX4);
  lastCSV = toCSV(last, includeX4);

  document.getElementById("meta").textContent = metaText(last.par, n, includeX4);
  renderPreview(last, includeX4);

  document.getElementById("btnCSV").disabled = false;
  document.getElementById("status").textContent = "Готово.";

  
});

document.getElementById("btnCSV").addEventListener("click", () => {
  if (!lastCSV) return;
  const pkgKey = document.getElementById("pkg").value;
  const varNo = document.getElementById("varno").value;
  const includeX4 = true;
  const filename = `RGR1_${pkgKey}-${varNo}_X1-X4.csv`;
  downloadText(filename, lastCSV);
});

</script>

</body>
</html>
